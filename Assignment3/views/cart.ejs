<%- include('partials/header') %>

<section class="cart-section">
  <div class="container">
    <div class="cart-card">
      <h2>Your Cart</h2>

      <% if (cart && cart.length) { %>
        <table class="cart-table">
          <thead>
            <tr>
              <th>Card</th>
              <th>Price</th>
              <th>Quantity</th>
              <th>Subtotal</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% cart.forEach(function(item) { %>
              <tr>
                <td>
                  <div style="display: flex; align-items: center; gap: 10px;">
                    <img src="<%= item.image %>" alt="<%= item.name %>" style="width: 50px; height: 50px; object-fit: cover; border-radius: 6px;" />
                    <span><%= item.name %></span>
                  </div>
                </td>
                <td>$<%= item.price.toFixed(2) %></td>
                <td><%= item.quantity %></td>
                <td>$<%= (item.price * item.quantity).toFixed(2) %></td>
                <td>
                  <form action="/cart/remove" method="POST">
                    <input type="hidden" name="productId" value="<%= item.productId %>" />
                    <button type="submit" class="btn-login">Remove</button>
                  </form>
                </td>
              </tr>
            <% }); %>
          </tbody>
        </table>

        <div class="cart-summary">
          <p>
            <strong>Items:</strong> <%= totalQuantity %> |
            <strong>Total:</strong> $<%= totalPrice.toFixed(2) %>
          </p>
          <div>
            <a href="/products" class="btn-login">Continue Shopping</a>
            <a href="/checkout" class="btn-signup">Proceed to Checkout</a>
          </div>
        </div>
      <% } else { %>
        <p class="cart-items-placeholder">
          Your cart is empty. Browse cards and click "Add To Cart" to start building your deck.
        </p>
        <div style="margin-top: 20px;">
          <a href="/products" class="btn-primary">Browse Cards</a>
        </div>
      <% } %>
    </div>
  </div>
</section>

<%- include('partials/footer') %>


